<!DOCTYPE html>
<html>
<style type='text/css'>
        html, body {
            height: 1000%;
            width: 1000%;
            transform: scale(0.1);
            transform-origin: left top;
            margin: 0;
            padding: 0;
            background-color: #000000;
            overflow: hidden;
            position: fixed;
        }

</style>
<head>
    <meta name='viewport'
          content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no'>
</head>
<body>
<div id='player'></div>
<script>
	var tag = document.createElement('script');
      tag.src = "https://youtube.com/iframe_api";
      var firstScriptTag = document.getElementsByTagName('script')[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

      var player;
      var timerId;
      var e = document.createEvent('UIEvent');
      function onYouTubeIframeAPIReady() {
        player = new YT.Player('player', {
          height: '100%',
          width: '100%',
          playerVars: {
            'controls': 0,
            'autoplay': 0,
			'enablejsapi': 1,
			'fs': 0,
			'origin': 'https://www.youtube.com',
			'rel': 0,
			'showinfo': 0,
			'iv_load_policy': 3,
			'modestbranding': 1,
			'cc_load_policy': 0
          },
           events: {
    				onReady: function(event) { Ready.postMessage("Ready"); event.target.playVideo()},
    				onStateChange: function(event) { sendPlayerStateChange(event.data) },
    				onPlaybackQualityChange: function(event) { PlaybackQualityChange.postMessage(event.data) },
    				onPlaybackRateChange: function(event) { PlaybackRateChange.postMessage(event.data) },
    				onError: function(error) { Errors.postMessage(error.data) }

    	},
        });
      }

      function sendPlayerStateChange(playerState) {
            clearTimeout(timerId);
            StateChange.postMessage(playerState);
            if(playerState==1){
                startSendCurrentTimeInterval();
                sendVideoData(player);
            }
      }

      function sendVideoData(player) {
            var videoData = {
                'duration'  : player.getDuration(),
                'videoUrl' : player.getVideoUrl(),
                'availableQualityLevels' : player.getAvailableQualityLevels(),
                'videoEmbedCode' : player.getVideoEmbedCode(),
            };
            VideoData.postMessage(JSON.stringify(videoData));
      }

      function startSendCurrentTimeInterval() {
            timerId = setInterval(function() {
                CurrentTime.postMessage(player.getCurrentTime());
                LoadedFraction.postMessage(player.getVideoLoadedFraction());
            }, 100 );
      }

</script>
</body>
</html>
